        client = mqtt.Client()
        client.username_pw_set(mqtt_config.get('username', ''), mqtt_config.get('password', ''))
        client.on_connect = self.mqttEventHandler

        try:
            client.connect(mqtt_config.get('broker', ''), mqtt_config.getint('port', ''), 60)
            self.msgs.logger.info(F"MQTT server connect {mqtt_config.get('broker', '')} :: {mqtt_config.getint('port', '')}")
            print(mqtt_config.get('topic', ''))
            client.loop_forever()
        except ConnectionRefusedError:
            self.msgs.logger.info("MQTT connection refused")
        except Exception as e:
            self.msgs.logger.info(F"Error connecting to MQTT broker {e}")



        client = mqtt.Client()
        client.on_connect = self.on_connect
        client.on_message = self.mqttEventHandler
        # client.on_disconnect = on_disconnect

        # Set username and password (if required by the MQTT broker)
        username = "owhite"
        password = "thing12"
        client.username_pw_set(username, password)

        # Connect to the MQTT broker
        try:
            client.connect("10.0.1.10", 1883, 60)
            client.loop_forever()
        except ConnectionRefusedError:
            print("Connection to MQTT broker refused")
        except Exception as e:
            print("Error connecting to MQTT broker:", str(e))
